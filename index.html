<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>李昊天因为太喜欢陈不染了就做了一个网页给她</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #A3BFFA, #667EEA);
      font-family: 'Dancing Script', cursive;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      position: relative;
    }
    h1 {
      color: #fff;
      font-size: 3.5rem;
      text-align: center;
      margin: 1rem 0;
      text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      z-index: 10;
    }
    .score {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      font-size: 2rem;
      text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      z-index: 10;
    }
    .game-area {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }
    .game-object {
      position: absolute;
      width: 100px;
      height: 100px;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: transform 0.1s ease;
    }
    .game-object img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 15px;
    }
    .split-container {
      position: absolute;
      width: 100px;
      height: 100px;
    }
    .split-left, .split-right {
      position: absolute;
      width: 50%;
      height: 100%;
      overflow: hidden;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    .split-left img, .split-right img {
      width: 200%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
    }
    .split-left {
      left: 0;
      animation: splitLeft 0.5s ease forwards;
    }
    .split-right {
      right: 0;
      animation: splitRight 0.5s ease forwards;
    }
    .split-left img {
      left: 0;
      border-top-left-radius: 15px;
      border-bottom-left-radius: 15px;
    }
    .split-right img {
      right: 0;
      border-top-right-radius: 15px;
      border-bottom-right-radius: 15px;
    }
    @keyframes splitLeft {
      to {
        transform: translateX(-50px) rotate(-15deg);
        opacity: 0;
      }
    }
    @keyframes splitRight {
      to {
        transform: translateX(50px) rotate(15deg);
        opacity: 0;
      }
    }
    .trail {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #fff;
      border-radius: 50%;
      pointer-events: none;
      opacity: 0.7;
    }
    @media (max-width: 600px) {
      h1 {
        font-size: 2rem;
      }
      .score {
        top: 60px;
        font-size: 1.5rem;
      }
      .game-object, .split-container {
        width: 80px;
        height: 80px;
      }
      .split-left, .split-right {
        width: 50%;
        height: 100%;
      }
      .split-left img, .split-right img {
        width: 200%;
        height: 100%;
      }
      @keyframes splitLeft {
        to {
          transform: translateX(-40px) rotate(-15deg);
          opacity: 0;
        }
      }
      @keyframes splitRight {
        to {
          transform: translateX(40px) rotate(15deg);
          opacity: 0;
        }
      }
    }
  </style>
</head>
<body>
  <h1>李昊天因为太喜欢陈不染了就做了一个网页给她</h1>
  <div class="score" id="score">得分: 0</div>
  <div class="game-area" id="gameArea"></div>
  <audio id="cutDurianSound" src="https://cdn.pixabay.com/audio/2023/01/31/audio_3e768a37b0.mp3"></audio>
  <audio id="cutPhotoSound" src="https://cdn.pixabay.com/audio/2023/01/31/audio_1f5e7a8b2c.mp3"></audio>

  <script>
    const photos = [
      { src: '441747730548_.pic.jpg', type: 'photo' },
      { src: '451747730550_.pic.jpg', type: 'photo' },
      { src: '461747730552_.pic.jpg', type: 'photo' },
      { src: '471747730554_.pic.jpg', type: 'photo' },
      { src: '481747730556_.pic.jpg', type: 'photo' },
    ];

    const durians = [
      { src: 'durian.jpg', type: 'durian' },
    ];

    const gameArea = document.getElementById('gameArea');
    const scoreDisplay = document.getElementById('score');
    const cutDurianSound = document.getElementById('cutDurianSound');
    const cutPhotoSound = document.getElementById('cutPhotoSound');
    let score = 0;
    let mouseTrail = [];
    let isMouseDown = false;

    // 鼠标拖动轨迹
    document.addEventListener('mousedown', () => {
      isMouseDown = true;
    });
    document.addEventListener('mouseup', () => {
      isMouseDown = false;
      mouseTrail = [];
    });
    document.addEventListener('mousemove', (e) => {
      if (isMouseDown) {
        mouseTrail.push({ x: e.clientX, y: e.clientY });
        if (mouseTrail.length > 10) mouseTrail.shift();

        // 显示拖动轨迹
        const trail = document.createElement('div');
        trail.className = 'trail';
        trail.style.left = e.clientX - 5 + 'px';
        trail.style.top = e.clientY - 5 + 'px';
        gameArea.appendChild(trail);
        setTimeout(() => trail.remove(), 200);
      }
    });

    // 生成游戏对象
    function spawnObject() {
      // 75%概率生成榴莲，25%概率生成照片
      const isDurian = Math.random() < 0.75;
      const objectData = isDurian ? durians[0] : photos[Math.floor(Math.random() * photos.length)];
      const object = document.createElement('div');
      object.className = 'game-object';
      object.dataset.type = objectData.type;
      const img = document.createElement('img');
      img.src = objectData.src;
      img.onerror = () => {
        img.src = 'https://via.placeholder.com/100/FFD700/000000?text=榴莲';
      };
      object.appendChild(img);
      gameArea.appendChild(object);

      // 初始位置和速度（放慢）
      const startX = Math.random() * (window.innerWidth - 100);
      let x = startX;
      let y = window.innerHeight;
      const velocityX = (Math.random() - 0.5) * 2; // 降低水平速度
      const velocityY = -8 - Math.random() * 3;   // 降低初始上升速度
      const gravity = 0.2;                        // 降低重力加速度

      function update() {
        y += velocityY;
        x += velocityX;
        object.style.left = x + 'px';
        object.style.top = y + 'px';

        // 应用重力
        object.velocityY = (object.velocityY || velocityY) + gravity;
        y += object.velocityY;
        x += velocityX;

        // 检测是否被切中
        const rect = object.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        let hit = false;

        for (let i = 1; i < mouseTrail.length; i++) {
          const p1 = mouseTrail[i - 1];
          const p2 = mouseTrail[i];
          const dist = pointToLineDistance(centerX, centerY, p1.x, p1.y, p2.x, p2.y);
          if (dist < 50) {
            hit = true;
            break;
          }
        }

        if (hit) {
          // 切开特效
          const splitContainer = document.createElement('div');
          splitContainer.className = 'split-container';
          splitContainer.style.left = x + 'px';
          splitContainer.style.top = y + 'px';
          
          const splitLeft = document.createElement('div');
          splitLeft.className = 'split-left';
          const leftImg = document.createElement('img');
          leftImg.src = objectData.src;
          splitLeft.appendChild(leftImg);

          const splitRight = document.createElement('div');
          splitRight.className = 'split-right';
          const rightImg = document.createElement('img');
          rightImg.src = objectData.src;
          splitRight.appendChild(rightImg);

          gameArea.appendChild(splitContainer);
          splitContainer.appendChild(splitLeft);
          splitContainer.appendChild(splitRight);

          // 播放音效并更新分数
          if (objectData.type === 'durian') {
            score += 10;
            cutDurianSound.currentTime = 0;
            cutDurianSound.play();
          } else {
            score -= 20;
            cutPhotoSound.currentTime = 0;
            cutPhotoSound.play();
          }
          scoreDisplay.textContent = `得分: ${score}`;
          object.remove();
          setTimeout(() => splitContainer.remove(), 500);
          return;
        }

        // 超出屏幕移除
        if (y > window.innerHeight || x < -100 || x > window.innerWidth) {
          object.remove();
          return;
        }

        requestAnimationFrame(update);
      }

      update();
    }

    // 计算点到线段的距离
    function pointToLineDistance(px, py, x1, y1, x2, y2) {
      const A = px - x1;
      const B = py - y1;
      const C = x2 - x1;
      const D = y2 - y1;
      const dot = A * C + B * D;
      const lenSq = C * C + D * D;
      let param = -1;
      if (lenSq !== 0) param = dot / lenSq;

      let xx, yy;
      if (param < 0) {
        xx = x1;
        yy = y1;
      } else if (param > 1) {
        xx = x2;
        yy = y2;
      } else {
        xx = x1 + param * C;
        yy = y1 + param * D;
      }

      const dx = px - xx;
      const dy = py - yy;
      return Math.sqrt(dx * dx + dy * dy);
    }

    // 定期生成对象
    setInterval(spawnObject, 1500 + Math.random() * 1500);

    // 初始生成
    spawnObject();
  </script>
</body>
</html>
